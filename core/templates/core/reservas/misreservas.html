{% extends "base.html" %}
{% block title %}Mis reservas{% endblock %}

{% block content %}
<div class="container py-5">

  <div class="text-center mb-4">
    <h1 class="brand-title">
      <span class="brand-match">MIS</span> <span class="brand-play">RESERVAS</span>
    </h1>
    <p class="text-muted m-0">Revisa, cancela o confirma tus reservas.</p>
  </div>

  {% if reservas %}
    <div class="list-group list-reservas shadow-sm">
      {% for r in reservas %}
        <div class="list-group-item item-reserva">
          <div class="reserva-main">
            <div class="reserva-cancha fw-semibold">{{ r.cancha }}</div>
            <div class="reserva-meta text-muted">
              {{ r.fecha_hora_inicio|date:"d/m/Y H:i" }} — {{ r.fecha_hora_fin|date:"H:i" }}
              · ${{ r.precio_total|floatformat:0 }}
            </div>
            <div class="reserva-badges">
              <span class="badge badge-gold">{{ r.estado }}</span>
              <span class="badge badge-purple">{{ r.cancha.get_deporte_display }}</span>
            </div>
          </div>
          <div class="reserva-actions">
            <a class="btn btn-sm btn-primary" href="{% url 'reservas_resumen' r.id %}">Ver</a>
            {% if r.estado == "PENDIENTE" or r.estado == "CONFIRMADA" %}
              <a class="btn btn-sm btn-outline-danger" href="{% url 'reservas_cancelar' r.id %}">Cancelar</a>
            {% endif %}
          </div>
        </div>
      {% endfor %}
    </div>

    <nav class="mt-3 d-flex justify-content-between">
      <div>
        {% if reservas.has_previous %}
          <a class="btn btn-sm btn-outline-secondary" href="?page={{ reservas.previous_page_number }}">← Anterior</a>
        {% endif %}
      </div>
      <div>
        {% if reservas.has_next %}
          <a class="btn btn-sm btn-outline-secondary" href="?page={{ reservas.next_page_number }}">Siguiente →</a>
        {% endif %}
      </div>
    </nav>
  {% else %}
    <div class="alert alert-info">No tienes reservas registradas.</div>
  {% endif %}

</div>
{% endblock %}
